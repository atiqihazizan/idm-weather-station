import{r as n,a as P}from"./vendor2-K1s1Ejrb.js";import{m as U}from"./vendor-DW0q80ih.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const o of c.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function i(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(r){if(r.ep)return;r.ep=!0;const c=i(r);fetch(r.href,c)}})();var W={exports:{}},p={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D=n,L=Symbol.for("react.element"),k=Symbol.for("react.fragment"),F=Object.prototype.hasOwnProperty,H=D.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$={key:!0,ref:!0,__self:!0,__source:!0};function O(l,t,i){var s,r={},c=null,o=null;i!==void 0&&(c=""+i),t.key!==void 0&&(c=""+t.key),t.ref!==void 0&&(o=t.ref);for(s in t)F.call(t,s)&&!$.hasOwnProperty(s)&&(r[s]=t[s]);if(l&&l.defaultProps)for(s in t=l.defaultProps,t)r[s]===void 0&&(r[s]=t[s]);return{$$typeof:L,type:l,key:c,ref:o,props:r,_owner:H.current}}p.Fragment=k;p.jsx=O;p.jsxs=O;W.exports=p;var e=W.exports,C,R=P;C=R.createRoot,R.hydrateRoot;const f=({title:l,children:t,contentClass:i=""})=>e.jsxs("div",{className:"flexCard bg-gray-900 text-white rounded-lg shadow-xl p-6 w-full",children:[e.jsx("div",{className:"header text-center mb-6",children:e.jsx("p",{className:"title text-4xl w-full font-semibold text-gray-300",children:l})}),e.jsx("div",{className:`h-[calc(100%-50px)] justify-around ${i}`,children:t})]});function A({data:l}){const[t,i]=n.useState({value:"-",unit:""}),[s,r]=n.useState({value:"-",unit:""});return n.useEffect(()=>{l&&(i(l.temperature),r(l.humidity))},[l]),e.jsx(f,{title:"Indoor",contentClass:"flex flex-col item-middle",children:e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h5",{className:"text-[15pt] text-center",children:"WS Panel"}),e.jsx("div",{className:"border-t border-gray-500 my-3"}),e.jsxs("div",{className:"flex flex-col gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-400 text-2xl mb-3",children:"Temperature"}),e.jsxs("p",{className:"text-5xl font-bold",children:[(t==null?void 0:t.value)||"-",e.jsxs("span",{className:"text-2xl text-gray-400",children:[" ",(t==null?void 0:t.unit)||""]})]})]}),e.jsxs("div",{className:"humidity text-center",children:[e.jsx("p",{className:"text-gray-400 text-2xl mb-3",children:"Humidity"}),e.jsxs("p",{className:"text-5xl font-bold",children:[(s==null?void 0:s.value)||"-",e.jsxs("span",{className:"text-2xl text-gray-400",children:[" ",(s==null?void 0:s.unit)||""]})]})]})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h5",{className:"text-[15pt] text-center",children:"Data Logger"}),e.jsx("div",{className:"border-t border-gray-500 my-3"}),e.jsxs("div",{className:"flex flex-col gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-400 text-2xl mb-3",children:"Temperature"}),e.jsxs("p",{className:"text-5xl font-bold",children:[(t==null?void 0:t.value)||"-",e.jsxs("span",{className:"text-2xl text-gray-400",children:[" ",(t==null?void 0:t.unit)||""]})]})]}),e.jsxs("div",{className:"humidity text-center",children:[e.jsx("p",{className:"text-gray-400 text-2xl mb-3",children:"Humidity"}),e.jsxs("p",{className:"text-5xl font-bold",children:[(s==null?void 0:s.value)||"-",e.jsxs("span",{className:"text-2xl text-gray-400",children:[" ",(s==null?void 0:s.unit)||""]})]})]})]})]})]})})}function B({data:l}){const[t,i]=n.useState({unit:"",value:"-"}),[s,r]=n.useState({unit:"",value:"-"}),[c,o]=n.useState({unit:"",value:""}),[m,x]=n.useState({unit:"",value:""}),[a,d]=n.useState({unit:"",value:""}),[u,j]=n.useState({unit:"",value:""});return n.useEffect(()=>{l!=null&&l.rain_rate&&i(l.rain_rate),l!=null&&l.daily&&r(l.daily),l!=null&&l.event&&o(l.event),l!=null&&l.weekly&&x(l.weekly),l!=null&&l.monthly&&d(l.monthly),l!=null&&l.yearly&&j(l.yearly)},[l]),e.jsx(f,{title:"Rainfall",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 h-full",children:[e.jsxs("div",{className:"left text-center flex flex-col self-center",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-gray-400 text-lg",children:"Rain Rate /hr"}),e.jsx("p",{className:"text-6xl font-bold mt-2",children:t.value})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-lg",children:"Daily"}),e.jsx("p",{className:"text-6xl font-bold mt-2",children:s.value})]})]}),e.jsxs("div",{className:"right text-left text-2xl flex flex-col justify-center gap-3",children:[e.jsxs("div",{className:" flex justify-between gap-3",children:[e.jsx("p",{className:"text-gray-400",children:"Event"}),e.jsxs("p",{className:"text-green-400",children:[c.value," ",c.unit]})]}),e.jsxs("div",{className:" flex justify-between gap-3",children:[e.jsx("p",{className:"text-gray-400",children:"Weekly"}),e.jsxs("p",{className:"text-green-400",children:[m.value," ",m.unit]})]}),e.jsxs("div",{className:" flex justify-between gap-3",children:[e.jsx("p",{className:"text-gray-400",children:"Monthly"}),e.jsxs("p",{className:"text-green-400",children:[a.value," ",a.unit]})]}),e.jsxs("div",{className:"flex justify-between gap-3",children:[e.jsx("p",{className:"text-gray-400",children:"Yearly"}),e.jsxs("p",{className:"text-green-400",children:[u.value," ",u.unit]})]})]})]})})}function M({data:l}){const[t,i]=n.useState({time:0,unit:"",value:0}),[s,r]=n.useState({time:0,unit:"",value:0});return n.useEffect(()=>{l&&(i(l.solar),r(l.uvi))},[l]),e.jsx(f,{title:"Solar and UVI",contentClass:"flex flex-col",children:e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{className:"solar text-center",children:[e.jsx("p",{className:"text-gray-400 text-2xl mb-2",children:"Solar"}),e.jsxs("p",{className:"text-5xl font-bold",children:[(t==null?void 0:t.value)||"",e.jsxs("span",{className:"text-2xl text-gray-400",children:[" ",(t==null?void 0:t.unit)||""]})]})]}),e.jsxs("div",{className:"uvi text-center",children:[e.jsx("p",{className:"text-gray-400 text-2xl mb-2",children:"UVI"}),e.jsxs("p",{className:"text-5xl font-bold",children:[(s==null?void 0:s.value)||"-",e.jsxs("span",{className:"text-2xl text-gray-400",children:[" ",(s==null?void 0:s.unit)||""]})]})]})]})})}function q({data:l}){const[t,i]=n.useState({}),[s,r]=n.useState({value:0,label:""}),[c,o]=n.useState({});function m(x){const a=x%360,d=Math.round(a/22.5)%16;return["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"][d]}return n.useEffect(()=>{var x;if(l){const a=l==null?void 0:l.wind_speed,d=l==null?void 0:l.wind_gust,u=(x=l==null?void 0:l.wind_direction)==null?void 0:x.value;i(a),o(d),r({value:u,label:m(u)})}},[l]),e.jsx(f,{title:"Wind",children:e.jsxs("div",{className:"flex justify-between items-center h-full",children:[e.jsxs("div",{className:"cell text-center flex flex-col items-center",children:[e.jsx("p",{className:"text-gray-400 text-2xl",children:"Wind"}),e.jsx("p",{className:"text-5xl font-bold",children:(t==null?void 0:t.value)??"-"})]}),e.jsx("div",{className:"cell relative text-center flex flex-col items-center",children:e.jsx("div",{className:"centerImg flex items-center justify-center",style:{width:"250px",height:"250px",transform:`rotate(${(s==null?void 0:s.value)??0}deg)`},children:e.jsxs("div",{className:"flex relative items-center justify-center gap-3",style:{transform:`rotate(${s!=null&&s.value?360-parseInt(s==null?void 0:s.value):0}deg)`},children:[e.jsxs("p",{className:"text-7xl font-bold text-white flex items-center",children:[(s==null?void 0:s.value)??"0",e.jsx("span",{className:"text-3xl text-gray-400 ml-1 relative -top-5",children:"°"})]}),e.jsx("p",{className:"absolute top-[110%] text-green-400 text-2xl",children:(s==null?void 0:s.label)??""})]})})}),e.jsxs("div",{className:"cell text-center flex flex-col items-center",children:[e.jsx("p",{className:"text-gray-400 text-2xl",children:"Gust"}),e.jsx("p",{className:"text-5xl font-bold",children:(c==null?void 0:c.value)??"-"})]})]})})}class J{constructor(t,i={}){this.client=null,this.brokerUrl=t,this.options=i,this.isConnected=!1}connect(t,i){this.client=U.connect(this.brokerUrl,this.options),this.client.on("connect",()=>{console.log("Connected to client"),this.isConnected=!0,t&&t()}),this.client.on("error",s=>{console.error("Client connection error:",s),this.isConnected=!1,i&&i(s)}),this.client.on("offline",()=>{console.warn("Client offline"),this.isConnected=!1})}subscribe(t,i){if(!this.client||!this.isConnected){console.error("Cannot subscribe, client is not connected.");return}this.client.subscribe(t,s=>{s&&console.error(`Failed to subscribe to topic "${t}":`,s)}),this.client.on("message",(s,r)=>{s===t&&i&&i(r.toString())})}publish(t,i){if(!this.client||!this.isConnected){console.error("Cannot publish, client is not connected.");return}this.client.publish(t,i,s=>{s&&console.error(`Failed to publish message to topic "${t}":`,s)})}disconnect(){this.client&&this.client.end(()=>{console.log("Disconnected from MQTT broker"),this.isConnected=!1})}}function Y(){n.useState(""),n.useState(!1);const[l,t]=n.useState({}),[i,s]=n.useState({}),[r,c]=n.useState({}),[o,m]=n.useState({}),[x,a]=n.useState({}),[d,u]=n.useState({}),[j,T]=n.useState({});n.useRef(!0);const I=window.location.search,g=new URLSearchParams(I).get("topic"),N=new J("ws://mahsites.com:8885/ws");return n.useEffect(()=>{g&&N.connect(()=>{N.subscribe(g,h=>{const{indoor:y,outdoor:v,pressure:b,rainfall:S,solar_and_uvi:w,wind:_,battery:E}=JSON.parse(h);_&&T(_),S&&m(S),v&&t(v),y&&s(y),b&&a(b),E&&u(E),w&&c(w),console.log(JSON.parse(h))})},h=>{console.error("Error connecting to broker:",h)})},[]),{getOutdoor:l,getIndoor:i,getSolarUvi:r,getRainfall:o,getPressure:x,getWind:j,getBattery:d}}function G({data:l}){const[t,i]=n.useState(100),[s,r]=n.useState(100);return e.jsx(f,{title:"Battery",contentClass:"flex flex-col !justify-start",children:e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h5",{className:"text-[15pt] text-center",children:"Wind"}),e.jsx("div",{className:"border-t border-gray-500 my-3"}),e.jsxs("div",{className:"flex flex-row justify-around mb-4",children:[e.jsx("p",{className:"text-green-400 text-lg font-bold",children:"STATUS"}),e.jsx("p",{className:"text-gray-400 text-lg",children:t>80?"High":t<20?"Week":"Normal"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h5",{className:"text-[15pt] text-center",children:"Data Logger"}),e.jsx("div",{className:"border-t border-gray-500 my-3"}),e.jsxs("div",{className:"flex flex-row justify-around mb-4",children:[e.jsx("p",{className:"text-green-400 text-lg font-bold",children:"STATUS"}),e.jsx("p",{className:"text-gray-400 text-lg",children:s>80?"High":s<20?"Week":"Normal"})]})]})]})})}function Q({data:l}){const[t,i]=n.useState({time:0,unit:"",value:0}),[s,r]=n.useState({time:0,unit:"",value:0}),[c,o]=n.useState({time:0,unit:"",value:0}),[m,x]=n.useState({time:0,unit:"",value:0}),[a,d]=n.useState({time:0,unit:"",value:0});return n.useEffect(()=>{l&&(i(l.temperature),r(l.feels_like),o(l.app_temp),x(l.dew_point),d(l.humidity))},[l]),e.jsx(f,{title:"Outdoor",contentClass:"flex flex-col item-middle",children:e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h5",{className:"text-[15pt] text-center",children:"Wind"}),e.jsx("div",{className:"border-t border-gray-500 my-3"}),e.jsxs("div",{className:"flex flex-col gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-400 text-2xl mb-3",children:"Temperature"}),e.jsxs("p",{className:"text-5xl font-bold",children:[(t==null?void 0:t.value)||"-",e.jsxs("span",{className:"text-2xl text-gray-400",children:[" ",(t==null?void 0:t.unit)||""]})]})]}),e.jsxs("div",{className:"humidity text-center",children:[e.jsx("p",{className:"text-gray-400 text-2xl mb-3",children:"Humidity"}),e.jsxs("p",{className:"text-5xl font-bold",children:[(a==null?void 0:a.value)||"-",e.jsxs("span",{className:"text-2xl text-gray-400",children:[" ",(a==null?void 0:a.unit)||""]})]})]})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h5",{className:"text-[15pt] text-center",children:"Rainfall"}),e.jsx("div",{className:"border-t border-gray-500 my-3"}),e.jsxs("div",{className:"flex flex-col gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-400 text-2xl mb-3",children:"Temperature"}),e.jsxs("p",{className:"text-5xl font-bold",children:[(t==null?void 0:t.value)||"-",e.jsxs("span",{className:"text-2xl text-gray-400",children:[" ",(t==null?void 0:t.unit)||""]})]})]}),e.jsxs("div",{className:"humidity text-center",children:[e.jsx("p",{className:"text-gray-400 text-2xl mb-3",children:"Humidity"}),e.jsxs("p",{className:"text-5xl font-bold",children:[(a==null?void 0:a.value)||"-",e.jsxs("span",{className:"text-2xl text-gray-400",children:[" ",(a==null?void 0:a.unit)||""]})]})]})]})]})]})})}function V(){n.useState(!0);const{getWind:l,getRainfall:t,getSolarUvi:i,getOutdoor:s,getIndoor:r}=Y();return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"main overflow-hidden",children:e.jsxs("div",{className:"h-full p-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(q,{data:l??null}),e.jsx(B,{data:t??null}),e.jsx(A,{data:r??null}),e.jsx(Q,{data:s??null}),e.jsx(M,{data:i??null}),e.jsx(G,{data:null})]})}),e.jsx("style",{children:`
  .responsive-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr); /* Default: 3 columns */
    gap: 1rem; /* Adjust gap between items */
  }

  /* Responsiveness */
  @media (max-width: 1024px) {
    .responsive-grid {
      grid-template-columns: repeat(2, 1fr); /* 2 columns for medium screens */
    }
  }

  @media (max-width: 768px) {
    .responsive-grid {
      grid-template-columns: 1fr; /* 1 column for small screens */
    }
  }
`})]})}const z=n.createContext({f2c:()=>{},mph2ms:()=>{}}),K=({children:l})=>{const t=(s=0,r="")=>s==0?{value:"0.0",unit:r}:{value:((s-32)*(5/9)).toFixed(1),unit:"℃"},i=(s=0,r="")=>s==0?{value:"0.0",unit:r}:{value:(s*.447).toFixed(1),unit:"m/s"};return e.jsx(z.Provider,{value:{f2c:t,mph2ms:i},children:l})};C(document.getElementById("root")).render(e.jsx(n.StrictMode,{children:e.jsx(K,{children:e.jsx(V,{})})}));
