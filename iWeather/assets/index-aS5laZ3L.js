import{r as i,a as U}from"./vendor2-K1s1Ejrb.js";import{m as T}from"./vendor-DW0q80ih.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const o of c.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&t(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function t(n){if(n.ep)return;n.ep=!0;const c=r(n);fetch(n.href,c)}})();var R={exports:{}},p={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D=i,L=Symbol.for("react.element"),F=Symbol.for("react.fragment"),$=Object.prototype.hasOwnProperty,A=D.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,B={key:!0,ref:!0,__self:!0,__source:!0};function O(l,s,r){var t,n={},c=null,o=null;r!==void 0&&(c=""+r),s.key!==void 0&&(c=""+s.key),s.ref!==void 0&&(o=s.ref);for(t in s)$.call(s,t)&&!B.hasOwnProperty(t)&&(n[t]=s[t]);if(l&&l.defaultProps)for(t in s=l.defaultProps,s)n[t]===void 0&&(n[t]=s[t]);return{$$typeof:L,type:l,key:c,ref:o,props:n,_owner:A.current}}p.Fragment=F;p.jsx=O;p.jsxs=O;R.exports=p;var e=R.exports,C,E=U;C=E.createRoot,E.hydrateRoot;const u=({title:l,children:s,contentClass:r=""})=>e.jsx("div",{className:"flex justify-center items-center bg-gray-800 text-white",children:e.jsxs("div",{className:"flexCard bg-gray-900 text-white rounded-lg shadow-md p-6 w-[490px]",children:[e.jsx("div",{className:"header text-center mb-6",children:e.jsx("p",{className:"title text-4xl w-full font-semibold text-gray-300",children:l})}),e.jsx("div",{className:`h-[calc(100%-50px)] justify-around ${r}`,children:s})]})});function M({data:l}){const[s,r]=i.useState({value:"-",unit:""}),[t,n]=i.useState({value:"-",unit:""});return i.useEffect(()=>{l&&(r(l.temperature),n(l.humidity))},[l]),e.jsx(u,{title:"Indoor",contentClass:"flex flex-col item-middle",children:e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-400 text-2xl mb-3",children:"Temperature"}),e.jsxs("p",{className:"text-5xl font-bold",children:[(s==null?void 0:s.value)||"-",e.jsxs("span",{className:"text-2xl text-gray-400",children:[" ",(s==null?void 0:s.unit)||""]})]})]}),e.jsxs("div",{className:"humidity text-center",children:[e.jsx("p",{className:"text-gray-400 text-2xl mb-3",children:"Humidity"}),e.jsxs("p",{className:"text-5xl font-bold",children:[(t==null?void 0:t.value)||"-",e.jsxs("span",{className:"text-2xl text-gray-400",children:[" ",(t==null?void 0:t.unit)||""]})]})]})]})})}function k({data:l}){var s,r;return e.jsx(u,{title:"Rainfall",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 h-full",children:[e.jsxs("div",{className:"left text-center flex flex-col self-center",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-gray-400 text-lg",children:"Rain Rate /hr"}),e.jsx("p",{className:"text-6xl font-bold mt-2",children:((s=l==null?void 0:l.rain_rate)==null?void 0:s.value)||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-lg",children:"Daily"}),e.jsx("p",{className:"text-6xl font-bold mt-2",children:((r=l==null?void 0:l.daily)==null?void 0:r.value)||"-"})]})]}),e.jsxs("div",{className:"right text-left text-2xl flex flex-col justify-center gap-3",children:[e.jsxs("div",{className:" flex justify-between gap-3",children:[e.jsx("p",{className:"text-gray-400",children:"Event"}),e.jsxs("p",{className:"text-green-400",children:["30.4"," mm"]})]}),e.jsxs("div",{className:" flex justify-between gap-3",children:[e.jsx("p",{className:"text-gray-400",children:"Weekly"}),e.jsxs("p",{className:"text-green-400",children:["76.9"," mm"]})]}),e.jsxs("div",{className:" flex justify-between gap-3",children:[e.jsx("p",{className:"text-gray-400",children:"Monthly"}),e.jsxs("p",{className:"text-green-400",children:["156.7"," mm"]})]}),e.jsxs("div",{className:"flex justify-between gap-3",children:[e.jsx("p",{className:"text-gray-400",children:"Yearly"}),e.jsxs("p",{className:"text-green-400",children:["156.7"," mm"]})]})]})]})})}function q({data:l}){const[s,r]=i.useState({time:0,unit:"",value:0}),[t,n]=i.useState({time:0,unit:"",value:0});return i.useEffect(()=>{l&&(r(l.solar),n(l.uvi))},[l]),e.jsx(u,{title:"Solar and UVI",contentClass:"flex flex-col",children:e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{className:"solar text-center",children:[e.jsx("p",{className:"text-gray-400 text-2xl mb-2",children:"Solar"}),e.jsxs("p",{className:"text-5xl font-bold",children:[(s==null?void 0:s.value)||"",e.jsxs("span",{className:"text-2xl text-gray-400",children:[" ",(s==null?void 0:s.unit)||""]})]})]}),e.jsxs("div",{className:"uvi text-center",children:[e.jsx("p",{className:"text-gray-400 text-2xl mb-2",children:"UVI"}),e.jsxs("p",{className:"text-5xl font-bold",children:[(t==null?void 0:t.value)||"-",e.jsxs("span",{className:"text-2xl text-gray-400",children:[" ",(t==null?void 0:t.unit)||""]})]})]})]})})}function H({data:l}){const[s,r]=i.useState({}),[t,n]=i.useState({value:0,label:""}),[c,o]=i.useState({});function f(x){const a=x%360,d=Math.round(a/22.5)%16;return["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"][d]}return i.useEffect(()=>{var x;if(l){const a=l==null?void 0:l.wind_speed,d=l==null?void 0:l.wind_gust,m=(x=l==null?void 0:l.wind_direction)==null?void 0:x.value;r(a),o(d),n({value:m,label:f(m)})}},[l]),e.jsx(u,{title:"Wind",children:e.jsxs("div",{className:"flex justify-between items-center h-full",children:[e.jsxs("div",{className:"cell text-center flex flex-col items-center",children:[e.jsx("p",{className:"text-gray-400 text-2xl",children:"Wind"}),e.jsx("p",{className:"text-5xl font-bold",children:(s==null?void 0:s.value)??"-"})]}),e.jsx("div",{className:"cell relative text-center flex flex-col items-center",children:e.jsx("div",{className:"centerImg flex items-center justify-center",style:{width:"250px",height:"250px",transform:`rotate(${(t==null?void 0:t.value)??0}deg)`},children:e.jsxs("div",{className:"flex relative items-center justify-center gap-3",style:{transform:`rotate(${t!=null&&t.value?360-parseInt(t==null?void 0:t.value):0}deg)`},children:[e.jsxs("p",{className:"text-7xl font-bold text-white flex items-center",children:[(t==null?void 0:t.value)??"0",e.jsx("span",{className:"text-3xl text-gray-400 ml-1 relative -top-5",children:"°"})]}),e.jsx("p",{className:"absolute top-[110%] text-green-400 text-2xl",children:(t==null?void 0:t.label)??""})]})})}),e.jsxs("div",{className:"cell text-center flex flex-col items-center",children:[e.jsx("p",{className:"text-gray-400 text-2xl",children:"Gust"}),e.jsx("p",{className:"text-5xl font-bold",children:(c==null?void 0:c.value)??"-"})]})]})})}class J{constructor(s,r={}){this.client=null,this.brokerUrl=s,this.options=r,this.isConnected=!1}connect(s,r){this.client=T.connect(this.brokerUrl,this.options),this.client.on("connect",()=>{console.log("Connected to client"),this.isConnected=!0,s&&s()}),this.client.on("error",t=>{console.error("Client connection error:",t),this.isConnected=!1,r&&r(t)}),this.client.on("offline",()=>{console.warn("Client offline"),this.isConnected=!1})}subscribe(s,r){if(!this.client||!this.isConnected){console.error("Cannot subscribe, client is not connected.");return}this.client.subscribe(s,t=>{t&&console.error(`Failed to subscribe to topic "${s}":`,t)}),this.client.on("message",(t,n)=>{t===s&&r&&r(n.toString())})}publish(s,r){if(!this.client||!this.isConnected){console.error("Cannot publish, client is not connected.");return}this.client.publish(s,r,t=>{t&&console.error(`Failed to publish message to topic "${s}":`,t)})}disconnect(){this.client&&this.client.end(()=>{console.log("Disconnected from MQTT broker"),this.isConnected=!1})}}function G(){i.useState(""),i.useState(!1);const[l,s]=i.useState({}),[r,t]=i.useState({}),[n,c]=i.useState({}),[o,f]=i.useState({}),[x,a]=i.useState({}),[d,m]=i.useState({}),[W,I]=i.useState({});i.useRef(!0);const P=window.location.search,g=new URLSearchParams(P).get("topic"),j=new J("ws://mahsites.com:8885/ws");return i.useEffect(()=>{g&&j.connect(()=>{j.subscribe(g,h=>{const{indoor:N,outdoor:v,pressure:y,rainfall:b,solar_and_uvi:S,wind:w,battery:_}=JSON.parse(h);w&&I(w),b&&f(b),v&&s(v),N&&t(N),y&&a(y),_&&m(_),S&&c(S),console.log(JSON.parse(h))})},h=>{console.error("Error connecting to broker:",h)})},[]),{getOutdoor:l,getIndoor:r,getSolarUvi:n,getRainfall:o,getPressure:x,getWind:W,getBattery:d}}function Q({data:l}){return e.jsx(u,{title:"Battery",contentClass:"flex justify-between items-top mt-4",children:e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"status mb-4",children:[e.jsx("p",{className:"text-green-400 text-lg font-bold",children:"NORMAL"}),e.jsx("div",{className:"border-t border-gray-500 mt-1"})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsx("p",{className:"text-gray-400 text-lg",children:"Sensor Array"}),e.jsx("p",{className:"text-green-400 text-lg",children:"Normal"})]})]})})}function V({data:l}){const[s,r]=i.useState({time:0,unit:"",value:0}),[t,n]=i.useState({time:0,unit:"",value:0}),[c,o]=i.useState({time:0,unit:"",value:0}),[f,x]=i.useState({time:0,unit:"",value:0}),[a,d]=i.useState({time:0,unit:"",value:0});return i.useEffect(()=>{l&&(r(l.temperature),n(l.feels_like),o(l.app_temp),x(l.dew_point),d(l.humidity))},[l]),e.jsx(u,{title:"Outdoor",contentClass:"flex flex-col item-middle",children:e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-400 text-2xl mb-3",children:"Temperature"}),e.jsxs("p",{className:"text-5xl font-bold",children:[(s==null?void 0:s.value)||"-",e.jsxs("span",{className:"text-2xl text-gray-400",children:[" ",(s==null?void 0:s.unit)||""]})]})]}),e.jsxs("div",{className:"humidity text-center",children:[e.jsx("p",{className:"text-gray-400 text-2xl mb-3",children:"Humidity"}),e.jsxs("p",{className:"text-5xl font-bold",children:[(a==null?void 0:a.value)||"-",e.jsxs("span",{className:"text-2xl text-gray-400",children:[" ",(a==null?void 0:a.unit)||""]})]})]})]})})}function Y(){i.useState(!0);const{getWind:l,getRainfall:s,getSolarUvi:r,getOutdoor:t,getIndoor:n}=G();return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"main overflow-hidden",children:e.jsxs("div",{className:"h-full p-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(H,{data:l??null}),e.jsx(k,{data:s??null}),e.jsx(M,{data:n??null}),e.jsx(V,{data:t??null}),e.jsx(q,{data:r??null}),e.jsx(Q,{data:null})]})}),e.jsx("style",{children:`
  .responsive-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr); /* Default: 3 columns */
    gap: 1rem; /* Adjust gap between items */
  }

  /* Responsiveness */
  @media (max-width: 1024px) {
    .responsive-grid {
      grid-template-columns: repeat(2, 1fr); /* 2 columns for medium screens */
    }
  }

  @media (max-width: 768px) {
    .responsive-grid {
      grid-template-columns: 1fr; /* 1 column for small screens */
    }
  }
`})]})}const z=i.createContext({f2c:()=>{},mph2ms:()=>{}}),K=({children:l})=>{const s=(t=0,n="")=>t==0?{value:"0.0",unit:n}:{value:((t-32)*(5/9)).toFixed(1),unit:"℃"},r=(t=0,n="")=>t==0?{value:"0.0",unit:n}:{value:(t*.447).toFixed(1),unit:"m/s"};return e.jsx(z.Provider,{value:{f2c:s,mph2ms:r},children:l})};C(document.getElementById("root")).render(e.jsx(i.StrictMode,{children:e.jsx(K,{children:e.jsx(Y,{})})}));
